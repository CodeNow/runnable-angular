doctype html
html(
  lang = "en"
  ng-controller = "ControllerApp"
  ng-class = "dataApp.state.current.data.bodyClass"
)
  head
    meta(
      charset = "utf-8"
    )
    meta(
      content = "width=device-width, initial-scale=1"
      name = "viewport"
    )
    title Runnable

    //- css
    link(
      href = "/build/css/index.css?v=#{locals.version}"
      media = "screen"
      rel = "stylesheet"
    )

    //- favicon
    if env !== 'production'
      link(
        href = "/build/images/favicon-dev.png"
        rel = "shortcut icon"
      )
    if env === 'production'
      link(
        href = "/build/images/favicon.png"
        rel = "shortcut icon"
      )

    //- ios and safari icons
    link(
      href = "/build/images/icons-ios.png"
      rel = "apple-touch-icon"
    )
    meta(
      console = "Runnable"
      name = "apple-mobile-web-app-title"
    )

    //- mobile chrome and firefox theme
    meta(
      content = "#5b3777"
      name = "theme-color"
    )

    //- js
    script(
      src = "/build/js/bundle.js?v=#{locals.version}"
    )
    if env === 'production'
      script.
        // heap analytics
        window.heap=window.heap||[];heap.load=function(a){window._heapid=a;var b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.heapanalytics.com/js/heap.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var d=function(a){return function(){heap.push([a].concat(Array.prototype.slice.call(arguments,0)))}},e=["identify","track"];for(var f=0;f<e.length;f++)heap[e[f]]=d(e[f])};
        heap.load("3017229846");
        // Intercom
        (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/wqzm3rju';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
        // olark code
        window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
        /* custom configuration goes here (www.olark.com/documentation) */
        olark.identify('1268-458-10-2188');

  body(
    ng-class = "{minimize: dataApp.data.minimizeNav}"
    ng-click = "dataApp.documentClickEventHandler($scope, this)"
  )
    //
      TIME: #{locals.commitTime}
      HASH: #{locals.commitHash}
      LINK: http://github.com/codenow/runnable-angular/commits/#{locals.commitHash}

    //- svg file
    .svg-defs(
      ng-include = "'svgDefs'"
    )

    //- spinner
    .spinner-wrapper.spinner-backdrop.spinner-lg.spinner-purple.in(
      ng-if = "dataApp.data.loading"
      ng-include = "'spinner'"
    )

    div(
      ui-view
    )
  div(
    style = "display: none"
    modal
    modal-actions = "dataApp.data.modalError.actions"
    modal-data = "dataApp.data.modalError.data"
    modal-template = "viewModalError"
  )
