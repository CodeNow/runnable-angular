'use strict';

var util = require('util');
var Base = require('../../base');
var urlJoin = require('../../../url-join');
var path = require('path');
module.exports = File;

function File (attr, opts) {
  opts = opts || {};
  opts.urlPath = urlJoin(opts.parentPath, this.urlPath);
  return Base.apply(this, arguments);
}

util.inherits(File, Base);

File.prototype.id = function (filepath) {
  var json = this.toJSON();
  if (!filepath) {
    if (json.path && json.name) {
      filepath = path.join(json.path, json.name);
    }
    else {
      filepath = '';
    }
  }

  return filepath;
};

File.prototype.urlPath = 'files';