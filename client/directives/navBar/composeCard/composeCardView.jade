h3.nav-card-header(
  active-account = "activeAccount"
  instance = "composeCluster.master"
  instance-navigation
  ng-if = "!isActive"
)

h3.nav-card-header(
  ng-attr-title = "{{getCardName()}}"
  ng-if = "isActive"
)
  //- bubble up test agent status for repos with test compose files
  status-icon.grid-block.shrink.passed(
    ng-if = "$root.featureFlags.composeNav"
  )

  span.text-overflow {{getCardName()}}

  //- only show for default branches
  button.grid-block.shrink.btn-container-menu(
    ng-class = "{'active': INC.popoverShown}"
    ng-if = "!INC.currentOrg.isPersonalAccount() && !INC.isInDemoFlow()"
    pop-over
    pop-over-active = "INC.popoverShown"
    pop-over-controller = "INC"
    pop-over-options = "{\"verticallyCentered\":true,\"left\":26}"
    pop-over-template = "instanceNavigationPopoverView"
  )
    svg.iconnables
      use(
        xlink:href = "#icons-gear"
      )

ul.nav-container-list(
  ng-include = "'stagingEnvironmentView'"
  ng-if = "composeCluster.staging.length"
  ng-if = "isActive"
)

ul.nav-container-list(
  ng-if = "composeCluster.testing.length"
  ng-include = "'testingEnvironmentView'"
  ng-if = "isActive"
)
