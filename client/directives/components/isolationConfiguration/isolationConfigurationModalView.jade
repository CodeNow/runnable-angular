.modal-backdrop.in
  .modal-dialog.modal-isolation
    header.modal-header
      h1.modal-heading Isolation Setup
      svg.iconnables.icons-close(
        ng-click = "ICMC.close()"
      )
        use(
          xlink:href = "#icons-close"
        )
    section.modal-body
      .text-center.text-overflow
        | The following containers will be created to isolate&#32;
        br
        span(
          ng-attr-title = "{{ICMC.instance.getRepoName()}}/{{ICMC.instance.getBranchName()}}"
        )
          status-icon(
            instance = "ICMC.instance"
          )
          | &#32;{{ICMC.instance.getRepoName()}}/
          strong.strong {{ICMC.instance.getBranchName()}}
      //- .p We’ll use existing backups to populate your new databases.

      //- repository containers
      .small.strong Repository Containers
      .list.list-bordered(
        ng-if = "ICMC.repoInstances.length"
      )
        .list-item(
          ng-repeat = "instance in ICMC.repoInstances"
        )
          svg.iconnables.icons-new-repository-server
            use(
              xlink:href = "#icons-new-repository-server"
            )
          span.span.text-overflow(
            title = "{{instance.getRepoName()}}"
          ) {{instance.getRepoName()}}
          | {{instance.children.length}}

          //- this should get the class 'modded' if the selected branch uses a modified configuration
          fancy-select.btn-xs.gray(
            value = "ICMC.instanceBranchMapping[instance.attrs.contextVersion.context]"
          )
            fancy-option(
              value = "$parent.instance"
            ) {{$parent.$parent.instance.getBranchName()}}
            fancy-option(
              ng-repeat = "child in $parent.instance.children.models"
              value = "child"
            ) {{$parent.child.getBranchName()}}
          //- this element should only appear if the selected branch uses a modified configuration
          //- small.small Branch uses a modified configuration

      //- database containers
      .small.strong Database Containers
        //- .small We’ll use existing backups to populate your new databases.
      .list.list-bordered(
        ng-if = "ICMC.nonRepoInstances.length"
      )
        .list-item(
          ng-repeat = "instance in ICMC.nonRepoInstances"
        )
          svg.iconnables.icons-server-new
            use(
              xlink:href = "#icons-server-new"
            )
          span.span.text-overflow {{instance.getDisplayName()}}

          //- show on containers that have a backup
          button.btn.btn-xs.btn-badge.gray(
            tooltip = "We’ll use the latest MySQL backup to populate this database."
            tooltip-options = "{\"class\":\"left\",\"right\":102,\"top\":-6}"
          ) From Backup
        .list-item
          svg.iconnables.icons-server-new
            use(
              xlink:href = "#icons-server-new"
            )
          span.span.text-overflow Redis
          button.btn.btn-xs.btn-badge.white(
            tooltip = "This container will start with an empty database."
            tooltip-options = "{\"class\":\"left\",\"right\":90,\"top\":-6}"
          ) No Backups

      //- non-database service containers
      .small.strong Other Containers
      .list.list-bordered
        .list-item
          svg.iconnables.icons-server-new
            use(
              xlink:href = "#icons-server-new"
            )
          span.span.text-overflow Consul-Server

    section.modal-footer.clearfix
      button.btn.white.float-left(
        ng-click = "ICMC.close()"
      ) Cancel
      button.btn.green.float-right(
        ng-disabled = "$root.isLoading.createIsolation"
        ng-click = "ICMC.createIsolation()"
      ) {{$root.isLoading.createIsolation ? 'Isolating...' : 'Enter Isolation'}}
