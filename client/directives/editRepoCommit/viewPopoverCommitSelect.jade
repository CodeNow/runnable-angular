//- commit-select popover
.popover.commit-select(
  ng-class = "{in: data.show}"
)
  h3.popover-title(
    ng-class = "{'show-filter': data.toggleFilter}"
  )
    //- filter across all commits in that repo
    //- should clear on close
    button.blue.btn-icon.btn-search(
      ng-click = "data.toggleFilter = !data.toggleFilter; \
                  data.commitFilter = '';"
      ng-class = "{active: data.toggleFilter}"
      title = "Filter All Commits"
    )
      svg.iconnables.icons-search-blue
        use(
          xlink:href = "#icons-search-blue"
        )
    //- focus on visible
    input.title-filter(
      select-on = "data.toggleFilter"
      ng-model = "data.commitFilter"
      placeholder = "Filter All Commits"
    )

    //- branch selector
    .btn-select.branch-btn
      button.blue.pull-right
        //- change this to a branch icon
        svg.iconnables.icons-git
          use(
            xlink:href = "#icons-git"
          )
        | {{ data.activeCommit.attrs.name }}
        svg.iconnables.icons-arrow-down
          use(
            xlink:href = "#icons-arrow-down"
          )
      select.select(
        ng-model = "data.activeBranch"
        ng-change = "actions.selectBranch(data, data.githubRepo.state.selectedBranch)"
        ng-options = "branch.attrs.name for branch in data.acv.githubRepo.branches.models"
      )

  //- list of commits
  ul.commit-group(
    ng-if = "data.activeBranch.commits.models.length"
  )
    //- show 35 commits per load
    //- .active class if currently selected commit
    li.commit-group-item.commit(
      ng-repeat = "commit in data.activeBranch.commits.models | commitFilter:data.commitFilter"
      ng-class = "{ \
        active: commit.attrs.sha === data.activeCommit.attrs.sha \
      }"
      ng-click = "actions.selectActiveBranchAndCommit(data, data.githubRepo.state.selectedBranch, commit)"
    )
      .commit-message {{ commit.attrs.commit.message }}
      .commit-message {{ commit.attrs.sha }}
      svg.iconnables.icons-commit
        use(
          xlink:href = "#icons-commit"
        )
      span.commit-author {{ commit.attrs.author.login }}
      time.commit-time {{ commit.attrs.commit.author.date | timeAgo }}

    //- li.commit-group-item.commit-item-more(
    //-   ng-if = "data.state.commits.length && !data.state.allCommitsLoaded"
    //- )
    //-   button.blue.btn-block Load Older
    //- li.commit-group-item(
    //-   ng-if = "!data.state.commits.length"
    //- )
      .spinner
        .spinner-ring
