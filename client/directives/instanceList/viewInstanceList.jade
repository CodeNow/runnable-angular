//- spinner for sidebar
.spinner-wrapper.spinner-md.spinner-gray.in(
  ng-if = "!data.activeAccount || isLoading.sidebar"
  ng-include = "'spinner'"
)
//- "Containers" sidebar heading
.sidebar-section-heading.strong(
  ng-if = "data.activeAccount && !isLoading.sidebar"
) Containers
//- list of all containers
ul.server-category-list(
  ng-if = "data.activeAccount && !isLoading.sidebar"
)
  li.server-category-list-item(
    ng-repeat = "masterInstance in data.instancesByPod.models |orderBy: ['attrs.contextVersion.appCodeVersions.length === 0', 'attrs.name'] track by masterInstance.attrs.name"
    ng-class = "{\
      'no-touching': !masterInstance.opts\
    }"
  )
    .server-list
      strong.strong.small(
        ng-if = "masterInstance.getRepoName()"
      ) {{ masterInstance.getRepoName() }}
        //- configure button for repo containers
        a.btn.btn-xs.btn-icon.button-configure(
          title = "configure"
          modal
          modal-current-model = "masterInstance"
          modal-state-model = "masterInstance.contextVersion.attrs.advanced ? 'env' : 'repository'"
          modal-template = "editServerModalOpen"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-advanced"
            )
      .server-list-item(
        ui-sref-active = "selected"
      )
        status-icon(
          instance = "masterInstance"
        )
        //- lists repo branches
        a.server-name.text-overflow(
          ng-if = "masterInstance.getRepoName()"
          title = "{{ masterInstance.getRepoName() }}/{{ masterInstance.getBranchName() }}"
          ui-sref = "\
            instance.instance({ userName: data.activeAccount.oauthName(), \
            instanceName: masterInstance.attrs.name })\
          "
        ) {{ masterInstance.getBranchName() }}
        //- lists non-repo containers
        a.server-name.text-overflow(
          ng-if = "!masterInstance.getRepoName()"
          title = "{{ masterInstance.attrs.name }}"
          ui-sref = "\
            instance.instance({ userName: data.activeAccount.oauthName(), \
            instanceName: masterInstance.attrs.name })\
          "
        ) {{ masterInstance.attrs.name }}
          //- configure button for non-repo containers
          a.btn.btn-xs.btn-icon.button-configure(
            title = "configure"
            modal
            modal-current-model = "masterInstance"
            modal-state-model = "masterInstance.contextVersion.attrs.advanced ? 'env' : 'repository'"
            modal-template = "editServerModalOpen"
            ng-if = "!masterInstance.getRepoName()"
          )
            svg.iconnables
              use(
                xlink:href = "#icons-advanced"
              )
      .server-list-item(
        ng-repeat = "branchFork in masterInstance.children.models | orderBy:'attrs.name'"
        ui-sref-active = "selected"
      )
        status-icon(
          instance = "branchFork"
        )
        a.server-name.text-overflow(
          title = "{{ branchFork.getDisplayName() }}"
          ui-sref = "\
            instance.instance({ userName: data.activeAccount.oauthName(), \
            instanceName: branchFork.attrs.name })\
          "
        ) {{ branchFork.getDisplayName() }}
        .btn.btn-xs.button-hide(
          ng-if = "$root.featureFlags.navListFilter"
        ) hide
      //- "X more…" popover link
      .more-containers(
        ng-if = "$root.featureFlags.navListFilter"
        pop-over
        pop-over-options = "{\"top\":-33,\"left\":215}"
        pop-over-template = "viewMoreContainersPopover"
      ) 8 more…