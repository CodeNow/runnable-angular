.modal-form.form-billing

  .spinner-wrapper.spinner-md.spinner-gray.in(
    ng-include = "'spinner'"
    ng-if = "$root.isLoading.billingForm"
  )

  animated-panel-container(
    ng-show = "!$root.isLoading.billingForm"
  )
    animated-panel(
      name = "billingForm"
    )
      .grid-block.vertical.align-center.form-trial.padding-md.fade(
        ng-class = "{'in': isActivePanel()}"
        trial-form
        from-modal = 'true'
        ng-if = "currentOrg.poppa.isInTrial() && !currentOrg.poppa.attrs.hasPaymentMethod"
      )
      .grid-block.vertical.form-plan.fade(
        ng-class = "{'in': isActivePanel()}"
        ng-init = "state.hasDuration = false"
        plan-status-form
        ng-show = "!$root.isLoading.billingForm"
        ng-if = "currentOrg.poppa.isInTrial() && !currentOrg.poppa.attrs.hasPaymentMethod"
      )

      .grid-block.vertical.form-plan.label.padding-sm.fade(
        ng-class = "{'in': isActivePanel()}"
        ng-include = "'showPlanForm'"
        ng-if = "!currentOrg.poppa.isInTrial() || (currentOrg.poppa.isInTrial() && currentOrg.poppa.attrs.hasPaymentMethod)"
      )
      .grid-block.vertical.label.padding-sm.fade(
        ng-class = "{'in': isActivePanel()}"
        show-payment-form
        ng-if = "!currentOrg.poppa.isInTrial() || (currentOrg.poppa.isInTrial() && currentOrg.poppa.attrs.hasPaymentMethod)"
      )
      .grid-block.vertical.label.padding-sm.fade(
        ng-class = "{'in': isActivePanel()}"
        billing-history-form
        ng-if = "!currentOrg.poppa.isInTrial() || (currentOrg.poppa.isInTrial() && currentOrg.poppa.attrs.hasPaymentMethod)"
      )
      .grid-block.vertical.label.padding-sm.fade(
        ng-class = "{'in': isActivePanel()}"
        ng-include = "'disableOrgForm'"
        ng-if = "!currentOrg.poppa.isInTrial() || (currentOrg.poppa.isInTrial() && currentOrg.poppa.attrs.hasPaymentMethod)"
      )
    animated-panel(
      name = "planStatusForm"
    )
      .grid-block.vertical.form-plan.fade(
        ng-class = "{'in': isActivePanel()}"
        plan-status-form
      )
    animated-panel(
      name = "changePaymentForm"
    )
      .grid-block.vertical.form-payment.fade(
        ng-class = "{'in': isActivePanel()}"
      )
        div(
          change-payment-form
          save = "actions.save"
          cancel = "actions.cancel"
          updating = "currentOrg.poppa.attrs.hasPaymentMethod"
        )
    animated-panel(
      name = "confirmationForm"
    )
      .grid-block.vertical.form-plan.fade(
        ng-class = "{'in': isActivePanel()}"
        confirmation-form
      )
