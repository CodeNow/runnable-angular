.modal-form(
  ng-if = "SIFC.loading"
)
  .spinner-wrapper.spinner-md.in(
    ng-include = "'spinner'"
  )

//- integrations form empty state
.modal-form.empty.well.in.form.form-integrations(
  ng-if = "!SIFC.loading && !SIFC.verified"
  ng-form = "SIFC.slackApiTokenForm"
)
  img.img(
    height = "90"
    src = "/build/images/slack-notification.png"
    width = "270"
  )

  p.p.empty Get container status updates in Slack
  input.input.input-sm.monospace.text-center.input-validate(
    name = "slackApiTokenField"
    ng-model = "SIFC.slackApiToken"
    ng-change = "SIFC.setFieldAsValid()"
    ng-disabled = "SIFC.verifying"
    placeholder = "API Token"
    required
    spellcheck = "false"
  )
  .validation-message.text-center(
    ng-if = "!SIFC.slackApiTokenForm.$pristine && SIFC.slackApiTokenForm.$invalid"
  ) Invalid API Token
  small.small.text-center Use an API token from&#32;
    a.link(
      href = "//slack.com/services"
      target = "_blank"
    ) an existing bot
    | , or create a&#32;
    a.link(
      href = "//slack.com/services/new/bot"
      target = "_blank"
    ) new bot
    | .
  button.btn.green.btn-spinner(
    ng-class = "{in: SIFC.verifying}"
    ng-click = "SIFC.verifySlack();"
    ng-disabled = "SIFC.verifying || !SIFC.slackApiToken.length"
  )
    .spinner-wrapper.spinner-sm.spinner-white.in(
      ng-include = "'spinner'"
      ng-if = "SIFC.verifying"
    )
    | Verify Token

//- integrations form
.modal-form.form.form-integrations.modal-integrations(
  ng-if = "!SIFC.loading && SIFC.verified"
)
  .label
    .clearfix
      .label-col Messaging
    .list.list-bordered
      label.list-item.text-overflow(
        ng-class = "{\
          active: member.slackOn,\
          disabled: !SIFC.settings.attrs.notifications.slack.enabled,\
          expanded: !member.found && member.slackOn\
        }"
        ng-repeat = "member in SIFC.slackMembers"
      )
        .badge-warning(
          ng-if = "\
            !member.found && \
            member.slackOn && \
            !member.ghName && SIFC.settings.attrs.notifications.slack.enabled\
          "
        )
          svg.iconnables.icons-alert
            use(
              xlink:href = "#icons-alert-round"
            )
        img.gravatar(
          height = "21"
          ng-src = "{{ member.profile.image_24 }}"
          width = "21"
        )
        | @{{ member.name }}
        .toggle-wrapper.float-right
          input.toggle-input(
            ng-disabled = "!SIFC.settings.attrs.notifications.slack.enabled"
            ng-model = "member.slackOn"
            ng-change = "SIFC.saveSlack()"
            type = "checkbox"
          )
          .toggle-group.toggle-sm(
            ng-class = "{invalid: !member.found && member.slackOn && !member.ghName}"
          )
        .well.small(
          ng-class = "{'no-touching': !SIFC.settings.attrs.notifications.slack.enabled}"
          ng-click = "$event.preventDefault();"
          ng-if = "!member.found && member.slackOn"
        ) We couldn't match this Slack user to a Github username. #{''}
          br.br
          | Select their username to enable messaging.
          select.select(
            ng-if = "!member.found"
            ng-model = "member.ghName"
            ng-options = "ghMember for ghMember in SIFC.ghMembers"
            ng-change = "SIFC.saveSlack()"
          )
            option(
              disabled
              selected = "selected"
              value = ""
            ) Select Github username
    small.small Members will receive messages from your bot when their containers are updated.

  //- disabling integration:
    - removes all .active class on labels
    - disables all inputs, but preserves their states
  .label.label-footer
    button.btn.btn-xs.red(
      ng-click = "SIFC.deleteAPIToken()"
    ) Delete Slack Integration
