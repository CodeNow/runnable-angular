.modal-backdrop.in
  .modal-dialog.modal-sheet.modal-invite.in(
    ng-init = "\
      uninvitedUsers = [\
        {username: 'dpletter', gravatarUrl: 'https://avatars2.githubusercontent.com/u/4671202', email: null},\
        {username: 'forrestj', gravatarUrl: 'https://avatars3.githubusercontent.com/u/4451216', email: 'forrest@runnable.com'},\
        {username: 'jh-abhishek', gravatarUrl: 'https://avatars2.githubusercontent.com/u/11288116', email: null},\
        {username: 'Myztiq', gravatarUrl: 'https://avatars3.githubusercontent.com/u/495765', email: 'kahn@runnable.com'}\
      ];\
      state.activeItem = null;\
      state.inviteSending = null;\
      state.inviteSent = null;\
      state.loading = true;\
      state.sending = false;\
    "
  )
    .modal-header Invite Teammate
      svg.iconnables.icons-close(
        ng-click = "POC.closePopover()"
      )
        use(
          xlink:href = "#icons-close"
        )

    .modal-body

      .spinner-wrapper.spinner-gray.spinner-sm.in.spinner-center(
        ng-click = "state.loading = !state.loading"
        ng-if = "state.loading"
        ng-include = "'spinner'"
      )

      //- list of teammates (from github) that are not on runnable
      ul.list.list-bordered.list-teammates(
        ng-if = "!state.loading"
      )
        li.list-item(
          ng-class = "{'active': state.activeItem === $index}"
          ng-if = "!state.loading"
          ng-repeat = "user in uninvitedUsers"
        )
          img.gravatar(
            height = "27"
            src = "{{user.gravatarUrl}}"
            width = "27"
          )
          .username.text-overflow.strong {{user.username}}
          .small.text-overflow {{user.email.length ? user.email : "—"}}

          //- cancel invite
          svg.iconnables.icons-close(
            ng-click = "state.activeItem = null"
            ng-if = "state.activeItem === $index"
          )
            use(
              xlink:href = "#icons-close"
            )

           //- autofocus on this
          input.input.input-sm.input-validate.validate-on-blur.js-animate(
            ng-model = "user.email"
            ng-show = "state.activeItem === $index"
            placeholder = "Email Address"
            required
            spellcheck = "false"
            type = "email"
          )

          //- disabled when invalid
          button.btn.btn-xs.green.js-animate(
            ng-class = "{'in': state.sending}"
            ng-click = "\
              state.activeItem = null;\
              state.inviteSending = $index;\
            "
            ng-disabled = "!user.email"
            ng-show = "state.activeItem === $index"
          ) Send

          .btn-wrapper
            //- invite button always prompts for email address
            button.btn.btn-xs.green(
              ng-click = "state.activeItem = $index"
              ng-if = "state.activeItem !== $index && state.inviteSending !== $index"
            ) Invite

          //- invite sending
          .spinner-wrapper.spinner-sm.spinner-gray.in(
            ng-click = "state.inviteSent = $index"
            ng-if = "state.inviteSending === $index && !state.inviteSent"
            ng-include = "'spinner'"
          )

          .send-confirmation.load(
            ng-if = "state.inviteSent === $index"
          )
            svg.iconnables.icons-check.float-left(
              viewbox = '0 0 14.5 10'
            )
              path.path(
                d = 'M1,4.5L5.5,9l8-8'
                fill = 'none',
                stroke = '#3ccb5a',
                stroke-linecap = 'round',
                stroke-linejoin = 'round',
                stroke-miterlimit = '10',
                stroke-width = '2',
              )
            | Sent

      .label.text-center(
        ng-if = "!state.loading"
      )
        small.small Invites are sent to the user’s email address.
