.modal-dialog.modal-environment(
  ng-class = "{'show-sidebar': data.toggleSidebar}"
  ng-click = "$event.stopPropagation()"
)
  .modal-container
    header.modal-header
      h1.modal-heading Edit Environment
      //- 0.3 SAN-436
        - to do:
        - do not show if there are no boxes with exposed ports to link
      button.btn.btn-icon.white(
        ng-class = "{active: data.toggleSidebar}"
        ng-click = "data.toggleSidebar = !data.toggleSidebar"
        tooltip = "Toggle List of Boxes"
        tooltip-options = "{\"class\":\"bottom\",\"left\":11,\"top\":30}"
        type = "button"
      )
        svg.iconnables.icons-sidebar
          use(
            xlink:href = "#icons-sidebar"
          )
    //- guide text should only appear once until dismissed
      ng-if = '!data.hideGuideHelpEnvModal'
    .guide.guide-no-help.blue(
    )
      h3.guide-header Using Variables
      pre.btn.btn-xs.blue.hover &lt;key&gt;=&lt;value&gt;
      p.guide-text
        | Variables listed here are added to the box during startup.
        br
        | Example notation:
      pre.btn.btn-xs.blue.hover DB_HOST=db.run.runnable.io

      button.btn.blue.btn-xs.btn-close(
        ng-click = "onChangeHideGuideEnv()"
      )
        svg.iconnables.icons-close
          use(
            xlink:href = "#icons-close"
          )
    main.modal-body
      //- If the stateModel has an env (even empty), then the envs have been modified, and
        - we should display them
      env-vars(
        state-model = "tempModel"
        current-model = "stateModel.env ? stateModel : currentModel"
        validation = "validation"
      )

    footer.modal-footer
      //- 0.3 SAN-436
        - to do:
        - toggle b/t .orange Rebuild and .green Save if on instance vs instanceEdit
      button.green(
        ng-if = "data.showRebuild"
        ng-click = "actions.rebuild(tempModel); defaultActions.cancel()"
        ng-disabled = "!validation.valid"
        type = "button"
      ) Save and Restart
      button.green(
        ng-if = "!data.showRebuild"
        ng-click = "defaultActions.save(tempModel, ['env'], defaultActions.cancel)"
        ng-disabled = "!validation.valid"
        type = "button"
      ) Save
      button.white(
        ng-click = "defaultActions.cancel()"
        type = "button"
      ) Go Back
  //- if no boxes with exposed ports (empty state)
    //- ng-if = "!(data.instances.models | instancesWithOpenPorts:data.instance).length"
  aside.modal-sidebar.boxes(
  )
    p.guide-text
      | We'll put boxes that you can link here. In order for a box to appear here, it needs a port exposed in the Dockerfile; like this:
    pre.btn.btn-xxs.gray EXPOSE 80
    p.guide-text To learn more about #{''}
      b.btn-
  //- if boxes with exposed ports
  //- aside.modal-sidebar.boxes(
  //-   ng-if = "(data.instances.models | instancesWithOpenPorts:data.instance).length"
  //- )
  //-   h2.sub-header
  //-     span.sub-header-text Boxes
  //-   ul.box-group
  //-     //- 0.3 SAN-436
  //-       - to do:
  //-       - boxes should appear in the same order as they appear on the navbar
  //-       - do not show boxes with no exposed ports
  //-       - clicks on b.btn should paste "$ENTER_ENV_VAR={{url}}+':'+{{port}}" (with specified port) into the last cursor position in the env file
  //-     li.box-group-item.expanded(
  //-       ng-repeat = "otherInstance in data.instances.models | \
  //-         instancesWithOpenPorts:data.instance"
  //-     )
  //-       .text-overflow {{ otherInstance.attrs.name }}
  //-       button.btn.btn-xs.gray(
  //-         ng-repeat = "url in otherInstance.containers.models[0].urls()"
  //-         ng-click = "pasteLinkedInstance(url)"
  //-         tooltip = "Link to: {{ url }}"
  //-         tooltip-options = "{\"class\":\"bottom\",\"left\":11,\"top\":21}"
  //-       ) {{url | filterCleanPorts}}
