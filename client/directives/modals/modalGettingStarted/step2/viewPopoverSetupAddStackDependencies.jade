.popover.right.menu.popover-add-dependencies(
  ng-class = "{in: data.show}"
)
  .arrow
  h3.popover-title
    .btn-group.clearfix
      button.btn.btn-xs.gray(
        ng-click = "popoverState = 'new'"
        ng-class = "{'active': popoverState !== 'existing'}"
      ) New
      button.btn.btn-xs.gray(
        ng-click = "popoverState = 'existing'"
        ng-class = "{'active': popoverState === 'existing'}"
      ) Existing
  .popover-content
    //- show .list-details if new
    ul.list.popover-list(
      ng-show = "popoverState !== 'existing'"
    )
      li.list-details
        .small Dependencies will be created on their own server.
      li.list-item.popover-list-item(
        ng-click = "actions.addDependency(stackDep)"
        ng-repeat = "\
          stackDep in data.dependencies.models | \
          unaddedDepInstances:data.state.dependencies | \
          unaddedModels:data.depFilter as filteredDeps"
        title = "{{ stackDep.attrs.name }}"
      ) {{ stackDep.attrs.name }}
    ul.list.popover-list(
      ng-show = "popoverState === 'existing'"
    )
      li.list-item.popover-list-item(
      ng-click = "actions.addDependency(instance, true)"
      ng-repeat = "\
         instance in data.instances.models | \
         unaddedDepInstances:data.state.dependencies | \
         unaddedModels:data.depFilter as filteredInstances"
      title = "{{ instance.attrs.name }}"
      ) {{ instance.attrs.name }}