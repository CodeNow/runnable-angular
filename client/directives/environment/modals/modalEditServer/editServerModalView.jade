form.modal-dialog.modal-edit(
  name = "editServerForm"
  ng-class = "{\
      disabled: building,\
      'no-touching': building\
          }"
)
  header.modal-header
    server-status-card-header.btn.btn-sm.btn-title(
      pop-over-options = "{\"right\":-7,\"top\":36}"
      pop-over-template = "serverOptionsModalPopover"
      ng-attr-no-touching = "{{ !state.repo }}"
    )
    .row.modal-tabs
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'buildfiles'}"
        ng-click = "changeTab('buildfiles')"
        ng-if = "state.advanced"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-advanced"
          )
        span.btn-text Advanced Configuration
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'stack'}"
        ng-click = "changeTab('stack')"
        ng-if = "!state.advanced"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-stack"
          )
        span.btn-text Stack Type
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'command'}"
        ng-click = "changeTab('command')"
        ng-if = "!state.advanced"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-start-cmd"
          )
        span.btn-text Container Command
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'ports'}"
        ng-click = "changeTab('ports')"
        ng-if = "!state.advanced"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-ports"
          )
        span.btn-text Exposed Ports
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'repositories'}"
        ng-click = "changeTab('repositories')"
        ng-if = "state.repo"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-git-repository"
          )
        span.btn-text Repositories
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'env'}"
        ng-click = "changeTab('env')"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-environment-variable"
          )
        span.btn-text Environment Variables
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'replace'}"
        ng-click = "changeTab('replace')"
        ng-if = "god === 'exists'"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-ports"
          )
        span.btn-text Translation Rules
      button.btn.btn-radio(
        ng-class = "{active: selectedTab === 'logs'}"
        ng-click = "changeTab('logs')"
      )
        svg.iconnables
          use(
            xlink:href = "#icons-log"
          )
        span.btn-text Logs

  section.modal-body

    .modal-form(
      ng-show = "selectedTab === 'buildfiles'"
      ng-include = "'viewFormBuildfiles'"
    )
    .modal-form(
      ng-show = "selectedTab === 'stack'"
      stack-selector-form
      data = "data"
      state = "state"
    )
    .modal-form(
      ng-if = "selectedTab === 'command'"
      ng-include = "'viewFormStartCommand'"
    )
    .modal-form(
      ng-if = "selectedTab === 'ports'"
      ng-include = "'viewFormPorts'"
    )
    .modal-form(
      ng-if = "selectedTab === 'repositories'"
      ng-include = "'viewFormRepositories'"
    )
    .modal-form(
      ng-if = "selectedTab === 'env'"
      ng-include = "'viewFormEnvironmentVariables'"
    )
    .modal-form(
      ng-if = "selectedTab === 'replace'"
      ng-include = "'viewFormReplace'"
    )
    .modal-form.modal-logs(
      ng-if = "selectedTab === 'logs'"
      ng-include = "'viewFormLogs'"
    )

  footer.modal-footer.clearfix
    //- disabled if no changes
    button.btn.green.btn-spinner(
      ng-class = "{in: building}"
      ng-click = "editServerForm.$invalid || getUpdatePromise()"
      ng-disabled = "!state.advanced && state.isStackInfoEmpty(state.selectedStack)"
      type = "submit"
    )
      //- spinner
      .spinner-wrapper.spinner-sm.spinner-white.in(
        ng-if = "building"
        ng-include = "'spinner'"
      )
      span.btn-text(
        ng-if = "!building"
      ) {{ (validation.env.length) ? (validation.env.length) + ' env errors' : 'Save Changes'}}
      span.btn-text(
        ng-if = "building"
      ) Saving
    button.btn.white.btn-cancel(
      ng-click = "defaultActions.cancel()"
      type = "button"
    ) Cancel
