.help-container(
  ng-if = "SMC.helpCards.getActiveCard().helpPopover.containerFiles"
)
  .help
    button.btn.btn-xs.btn-icon(
      ng-click = "SMC.helpCards.hideActiveCard()"
    )
      svg.iconnables.icons-close
        use(
          xlink:href = "#icons-close"
        )
    span(
      ng-bind-html = "SMC.helpCards.getActiveCard().helpPopover.containerFiles"
    )

.grid-block.shrink.align-center.well.gray.in.row-xxs(
  ng-if = "!SMC.state.advanced || !$root.featureFlags.dockerfileMirroring"
)
  svg.grid-content.row-xxs.shrink.iconnables.icons-dockerfile-lock
    use(
      xlink:href = "#icons-dockerfile-lock"
    )
  .grid-content.row-xxs.text-overflow
    div Unlock Dockerfile
    small.small
      span.span.text-overflow.float-left Editing your Dockerfile is for advanced users and is not reversible.
  //- when locking the dockerfile, prompt with modal template: viewModalLockDockerfile
  //- ✅ if repository (can simple mode) && previous simple build exists (can simple mode)
  label.toggle-wrapper(
    loading-promises-target = "{{SMC.name}}"
    ng-if = "!$root.featureFlags.dockerfileMirroring"
    read-only-switch
    state = "SMC.state"
  )
  button.btn.btn-sm.white(
    ng-if = "$root.featureFlags.dockerfileMirroring"
  )
    svg.iconnables.icons-lock
      use(
        xlink:href = "#icons-lock"
      )
    | Unlock

//- add logic for repository containers only
.grid-block.shrink.align-center.well.gray.in.row-xxs(
  ng-if = "$root.featureFlags.dockerfileMirroring && SMC.state.advanced"
)
  svg.grid-content.row-xxs.shrink.iconnables.icons-sync
    use(
      xlink:href = "#icons-sync"
    )
  .grid-content.row-xxs.text-overflow(
    ng-class = "{'padding-right': state.syncing}"
  )
    div Mirror Dockerfile
    small.small(
      ng-if = "state.syncing"
    )
      span.span.text-overflow.float-left(
        title = "reponame/path/to/dockerfile"
      ) Mirroring from GitHub:reponame/path/to/dockerfile
      //- when there's an error
      //- svg.iconnables.icons-alert-alt.float-left
        use(
          xlink:href = "#icons-alert-alt"
        )
      //- span.span Error: File not found
      button.btn.btn-xxs.gray(
        internal-modal-helper = "viewModalSync"
      ) Change…
    small.small(
      ng-if = "!state.syncing"
    ) Mirror with a Dockerfile from this repo on GitHub.

  //- this should open the 'viewModalSync' view when syncing has not been set up
  label.toggle-wrapper
    input.toggle-input(
      ng-model = "state.syncing"
      type = "checkbox"
    )
    .toggle-group.toggle-sm

//- table of current environment variables
//- if dockerfile tool feature flag:
//- state.readOnly = true
.ace-container.ace-build-files(
  ng-class = "{\
    'ace-runnable-dark': !$root.featureFlags.imAfraidOfTheDark,\
    'ace-runnable-light': $root.featureFlags.imAfraidOfTheDark\
  }"
  ng-init = "state.syncing = null"
)

  .sidebar(
    edit-explorer = "true"
    explorer
    explorer-title = "Build Files"
    file-model = "SMC.state.contextVersion"
    loading-promises-target = "editServerModal"
    ng-if = "!state.syncing"
    open-items = "SMC.openItems"
    read-only = "!SMC.state.advanced"
    root-dir = "SMC.state.contextVersion.rootDir"
    show-repo-folder = "true"
    get-display-name = "SMC.getDisplayName"
  )

  .ace_editor(
    file = "item"
    file-editor
    loading = "SMC.loading"
    loading-promises-target = "editServerModal"
    ng-class = "{'readonly': !SMC.state.advanced || state.syncing}"
    ng-if = "item.state.type === 'File'"
    ng-repeat = "item in SMC.openItems.models track by item.id()"
    ng-show = "item === SMC.openItems.activeHistory.last()"
    read-only = "!SMC.state.advanced || state.syncing"
    state = "SMC.state"
  )

  .floating-controls(
    ng-include = "'viewFloatingControls'"
  )
