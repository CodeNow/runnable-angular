//- default actions
//- prefer ng-hide > ng-if for this button

button.btn.btn-xs.white(
  ng-click = "SMC.state.showHostName = true"
  ng-hide = "SMC.state.showHostName"
  ng-init = "SMC.state.showHostName = false"
) {{$root.featureFlags.connections ? 'Connect to a Container' : 'Insert a URL'}}

button.btn.btn-xs.gray(
  ng-class = "{'active': SMC.data.toggleSidebar}"
  ng-click = "SMC.data.toggleSidebar = !SMC.data.toggleSidebar"
  ng-if = "\
    $root.featureFlags.hostnameTool && \
    !SMC.state.showHostName\
  "
  title = "Toggle list of URLs"
)
  //- show button if notifications
  .btn.btn-xxs.btn-badge(
    ng-if = "$root.featureFlags.hostnameNotifications"
    title = "999 new URLs"
  ) 999
  //- show icon if no notifications
  svg.iconnables.icons-sidebar(
    ng-if = "!$root.featureFlags.hostnameNotifications"
  )
    use(
      xlink:href = "#icons-sidebar"
    )
  | URLs

//- if inserting host names
.clearfix(
  ng-if = "SMC.state.showHostName"
)

  input.input.input-sm.monospace(
    ng-if = "$root.featureFlags.connections"
    placeholder = "KEY(required)"
    spellcheck = "false"
    type = "text"
  )

  p.p.text-gray(
    ng-if = "$root.featureFlags.connections"
  ) =

  .input-group.input-group-sm.white

    fancy-select.input-sm.monospace.text-overflow(
      placeholder = "Protocol"
      spellcheck = "false"
      type = "text"
      value = "SMC.state.newLink.protocol"
    )
      li.list-item.popover-list-item.small.disabled Select Protocol (optional)
      fancy-option.monospace(
        value = "'http://'"
      ) http:&#47;&#47;

    fancy-select.monospace.btn-sm.select-url(
      placeholder = "URL(required)"
      value = "SMC.state.newLink.server"
    )
      li.list-item.popover-list-item.small.disabled Select URL
      fancy-option.monospace(
        ng-if = "instance.attrs.shortHash !== $parent.$parent.$parent.SMC.instance.attrs.shortHash"
        ng-repeat = "instance in $parent.SMC.data.instances.models | orderBy: ['getElasticHostname()']"
        value = "instance"
      ) {{$parent.instance.getElasticHostname()}}

    fancy-select.input-sm.monospace.text-overflow(
      placeholder = "Port"
      type = "text"
      value = "$parent.SMC.state.newLink.port"
    )
      li.list-item.popover-list-item.small.disabled Select Port (optional)
      fancy-option(
        ng-repeat = "port in $parent.$parent.SMC.state.newLink.server | extractInstancePorts"
        value = "port"
      ) :{{$parent.port}}

.clearfix(
  ng-if = "SMC.state.showHostName"
)
  small.small.text-gray.text-overflow(
    ng-if = "$root.featureFlags.connections"
    title = "Connect to another container by using its URL in an environment variable."
  ) Connect to another container by using its URL in an environment variable.
  button.btn.btn-xs.gray.btn-cancel(
    ng-click = "SMC.state.showHostName = false"
  ) Cancel
  button.btn.btn-xs.green(
    ng-class = "{'float-right': !$root.featureFlags.connections}"
    ng-click = "SMC.state.showHostName = false; SMC.insertHostName(SMC.state.newLink);"
  ) {{$root.featureFlags.connections ? 'Create Connection' : 'Insert URL'}}
