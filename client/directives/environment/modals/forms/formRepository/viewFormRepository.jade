.help-container(
  ng-if = "helpCards.getActiveCard().helpPopover.repositories"
)
  .help(
    ng-bind-html = "helpCards.getActiveCard().helpPopover.repositories"
  )

.label.clearfix.label-build-commands
  .label-col Build Commands
    small.small (optional)
  .input-col
    label.small.strong.float-right(
      ng-class = "{'disabled': hasNoCommands()}"
      ng-if = "$root.featureFlags.buildCommandCache"
    ) Cache
      span.span &#32;a command
      .toggle-wrapper
        input.toggle-input(
          ng-click = "actions.toggleCache()"
          ng-disabled = "hasNoCommands()"
          ng-model = "cacheCommand"
          ng-model-options = "{getterSetter: true}"
          type = "checkbox"
        )
        .toggle-group.toggle-xs
    //-************
    //- deprecated textarea, remove with $root.featureFlags.buildCommandCache
    //- we only have suggestions for build commands on the main repository
    textarea.textarea.monospace(
      command-editor
      ng-disabled = "startCommandCanDisable && !state.selectedStack"
      ng-if = "!$root.featureFlags.buildCommandCache"
      ng-model = "mainRepoContainerFile.commands"
      ng-keydown = "cacheCommand(false)"
      spellcheck = "false"
      ng-model-options="{ updateOn: 'blur' }"
      ng-change = "updateDockerfile()"
    )
    //- end deprecated textarea
    //-************
    .build-commands-wrapper(
      ng-class = "{'focus': startCommandFocus}"
      ng-if = "$root.featureFlags.buildCommandCache"
    )
      .flex-wrapper
        textarea.textarea.monospace(
          command-editor
          ng-attr-rows = "{{mainRepoContainerFile.commands.length < 3 ? 3 : mainRepoContainerFile.commands.length}}"
          ng-blur = "startCommandFocus = false"
          ng-class = "{'margin-right': data.cacheCommand}"
          ng-disabled = "startCommandCanDisable && !state.selectedStack"
          ng-focus = "startCommandFocus = true"
          ng-model = "mainRepoContainerFile.commands"
          ng-keydown = "cacheCommand(false)"
          ng-model-options="{ updateOn: 'blur' }"
          ng-change = "updateDockerfile()"
          ng-trim = "false"
          spellcheck = "false"
        )
        .cache-column.js-animate(
          ng-show = "data.cacheCommand"
        )
          .cache-border
          label.radio-wrapper(
            ng-class = "{ 'no-touching': !command.body }"
            ng-repeat-start = "command in mainRepoContainerFile.commands"
          )
            input(
              name = "cache-radio"
              ng-click = "actions.updateCache(command)"
              ng-checked = "command.cache"
              ng-if = "command.body"
              type = "radio"
            )
          .cache-row(
            ng-repeat-end
          )
    small.small Add any commands needed to support your application. They’ll be run before the Container CMD from your repository’s root folder.
label.label.clearfix(
  ng-if = "$root.featureFlags.packagesField"
)
  .label-col Packages
    small.small (optional)

  .input-col
    textarea.textarea.monospace(
      ng-disabled = "startCommandCanDisable && !state.selectedStack"
      ng-model = "state.packages.packageList"
      ng-model-options="{ updateOn: 'blur' }"
      ng-change = "updateDockerfile()"
      placeholder = "dnsutils vim=7.3"
      spellcheck = "false"
    )
    small.small Add any packages you would like to install via apt-get, separated with spaces (e.g. ‘dnsutils vim=7.3’). This container is based on &#32;
      strong.strong Ubuntu.

label.label.clearfix
  .label-col Container CMD

  .input-col
    fancy-select.monospace(
      name = "repository.startCommand"
      ng-disabled = "startCommandCanDisable && !state.selectedStack.selectedVersion"
      ng-required = "startCommandCanDisable || ngShow()"
      show-dropdown = "state.selectedStack.startCommand"
      type = "text"
      value = "state.startCommand"
      on-update = "updateDockerfile"
      spellcheck = "false"
      autocomplete = "off"
    )
      li.list-item.popover-list-item.small Suggested Container CMDs
      fancy-option(
        ng-repeat = "startCmd in $parent.state.selectedStack.startCommand"
        value = "startCmd"
      ) {{$parent.startCmd}}

    small.small This is the long-running process that’ll run when your container is launched (e.g. ‘apache’, ‘NPM start’). Your container will stop running if this process terminates. #{''}
      a.link(
        href = "//docs.docker.com/reference/builder/#cmd"
        target = "_blank"
      ) More about the Container CMD
