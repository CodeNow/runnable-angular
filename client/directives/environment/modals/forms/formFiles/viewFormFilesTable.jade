.tr.multi-line.clearfix(
  ng-if = "$root.featureFlags.sshKeys"
  ng-repeat = "containerFile in state.containerFiles | filter:{type: 'SSH Key'}"
)
  .cell.cell-action.disabled.no-touching
    svg.iconnables.icons-drag
  .cell.text-overflow {{containerFile.name}}
    small.small(
      ng-if = "CCF.sshKey.getFileDate(containerFile)"
    ) {{ CCF.sshKey.getFileDate(containerFile) | timeAgo }}
  .cell.cell-type.small
    svg.iconnables.icons-key
      use(
        xlink:href = "#icons-key"
      )
    | SSH Key
  .cell.cell-action
    button.btn.btn-xs.gray(
      pop-over
      pop-over-actions = "CCF.filePopoverActions"
      pop-over-options = "{\"right\":0,\"top\":35}"
      pop-over-template = "viewPopoverFileOptions"
      pop-over-data = "containerFile"
    )
      svg.iconnables.icons-overflow
        use(
          xlink:href = "#icons-overflow"
        )

//- only show if there's > 0 ssh keys AND > 0 files
.tr.thead.clearfix(
  ng-if = "$root.featureFlags.sshKeys && (state.containerFiles | filter:{type: 'SSH Key'}).length"
)

//- dnd-drop needs this to be a list
ul.table-drag-drop(
  dnd-drop = "CCF.dropContainerFile(event, index, item, type)"
  dnd-list = "state.containerFiles"
)
  li.tr.multi-line.clearfix(
    dnd-draggable = "containerFile.id"
    dnd-dragstart = "actions.dragstart()"
    dnd-effect-allowed = "move"
    ng-class = "{\
      disabled: (containerFile.type === 'Main Repository' && !$root.featureFlags.sshKeys),\
      'tr-action': (containerFile.type !== 'Main Repository' && !$root.featureFlags.sshKeys)\
    }"
    ng-repeat = "containerFile in state.containerFiles | filter:{type: '!SSH Key'}"
  )
    .cell.cell-action(
      ng-class = "{\
        disabled: state.containerFiles.length < 2,\
        'no-touching': state.containerFiles.length < 2\
      }"
      dnd-handle
    )
      svg.iconnables.icons-drag
        use(
          xlink:href = "#icons-drag"
        )

    //- deprecated:
    .cell.text-overflow(
      ng-if = "(containerFile.type === 'File' && !$root.featureFlags.sshKeys)"
      ng-click = "CCF.actions.triggerEditFile(containerFile)"
      title = "{{ containerFile.name }}"
    ) {{ containerFile.name }}

    //- ssh key feature flag
    .cell.text-overflow(
      ng-if = "(containerFile.type === 'File' || containerFile.type === 'Repository') && $root.featureFlags.sshKeys"
      title = "{{ containerFile.name }}"
    ) {{ containerFile.name }}
      small.small(
        title = "{{ containerFile.path }}"
      ) /{{ containerFile.path }}

    .cell.text-overflow(
      ng-if = "!$root.featureFlags.sshKeys && (containerFile.type === 'Repository' || containerFile.type === 'Main Repository')"
      ng-click = "CCF.actions.triggerEditRepo(containerFile)"
      title = "{{ containerFile.name }}"
    ) {{ containerFile.name }}
      small.small(
        title = "{{ containerFile.path }}"
      ) /{{ containerFile.path }}

    .cell.cell-type.small
      svg.iconnables(
        ng-if = "containerFile.type === 'File'"
      )
        use(
          xlink:href = "#icons-file"
        )
      svg.iconnables(
        ng-if = "containerFile.type === 'Main Repository'"
      )
        use(
          xlink:href = "#icons-repository"
        )
      svg.iconnables(
          ng-if = "containerFile.type === 'Repository'"
        )
        use(
          xlink:href = "#icons-repository-additional"
        )
      | {{ containerFile.type }}
    .cell.cell-action(
      ng-class = "{'disabled': containerFile.type === 'Main Repository'}"
      ng-if = "$root.featureFlags.sshKeys"
    )
      button.btn.btn-xs.gray(
        pop-over
        pop-over-actions = "CCF.filePopoverActions"
        pop-over-options = "{\"right\":0,\"top\":35}"
        pop-over-template = "viewPopoverFileOptions"
        pop-over-data = "containerFile"
      )
        svg.iconnables.icons-overflow
          use(
            xlink:href = "#icons-overflow"
          )