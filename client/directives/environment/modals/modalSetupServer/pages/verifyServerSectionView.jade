header.modal-header
  h1.modal-heading {{ state.repo.attrs.name }} Selected Tab: {{ selectedTab }}!
  svg.iconnables.icons-close(
    ng-click = "defaultActions.cancel()"
  )
    use(
      xlink:href = "#icons-close"
    )
      .row.modal-tabs.clearfix.js-animate(
        ng-if="$root.featureFlags.newVerificationFlow"
        ng-class = "{\
          'active': selectedTab === 'repository',\
          'tabs-1': state.step === 1,\
          'tabs-2': state.step === 2\
        }"
        style = "{{state.step === 3 ? 'transition-duration: .3s' : ''}}"
      )
        button.btn.btn-radio(
          ng-class = "{'active': state.step === 1}"
          ng-click = "\
            changeTab('repository');\
            state.step = 1;\
            console.log('ChangeTab', changeTab);\
          "
          ng-if = "state.step >= 1 || isTabVisible('repository')"
          ng-attr-type = "{{state.step === 2 ? 'button' : 'submit'}}"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-repository"
            )
          .btn-text Repository
        button.btn.btn-radio.js-animate(
          ng-class = "{'active': state.step === 2 || selectedTab === 'commands'}"
          ng-click = "changeTab('commands')"
          ng-if = "state.step >= 2 || isTabVisible('commands')"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-start-cmd"
            )
          .btn-text Commands
            br
            | & Packages
        button.btn.btn-radio.js-animate(
          ng-class = "{'active': selectedTab === 'ports'}"
          ng-click = "changeTab('ports')"
          ng-if = "state.step >= 3 || isTabVisible('ports')"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-ports"
            )
          .btn-text Exposed Ports
        button.btn.btn-radio.js-animate(
          ng-class = "{'active': selectedTab === 'env'}"
          ng-click = "changeTab('env')"
          ng-if = "state.step >= 3"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-environment-variable"
            )
          .btn-text Environment Variables
        button.btn.btn-radio.js-animate(
          ng-class = "{'active': selectedTab === 'files'}"
          ng-click = "changeTab('files')"
          ng-if = "state.step >= 3 || isTabVisible('files')"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-keys-files"
            )
          .btn-text Files & SSH Keys
        button.btn.btn-radio.js-animate(
          ng-class = "{'active': selectedTab === 'translation'}"
          ng-click = "changeTab('translation')"
          ng-if = "state.step >= 3"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-translation"
            )
          .btn-text Find & Replace
        button.btn.btn-radio.js-animate(
          ng-class = "{'active': selectedTab === 'buildfiles'}"
          ng-click = "changeTab('buildfiles')"
          ng-if = "state.step >= 3"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-dockerfile"
            )
          .btn-text Dockerfile
        button.btn.btn-radio.js-animate(
          ng-class = "{\
            'active': selectedTab === 'logs',\
            'active': state.step === 4,\
          }"
          ng-click = "changeTab('logs')"
          ng-if = "state.step === 4"
        )
          svg.iconnables
            use(
              xlink:href = "#icons-log"
            )
          .btn-text Logs


section.modal-body
  .modal-form(
    ng-form = "verifyServerForm"
  )
    // Stack & Branch
    .label(
      data = "data"
      ng-if = "!$root.featureFlags.newVerificationFlow || state.step === 1"
      stack-selector-form
      state = "state"
      loading-promises-target = "setupServerModal"
    )
    // Commands
    .label(
      repository-form
      ng-if = "!$root.featureFlags.newVerificationFlow || state.step === 2"
      start-command-can-disable = "true"
      state = "state"
      loading-promises-target = "setupServerModal"
    )
    // Default messages
    p.p.empty(
      ng-if = "state.step === 3 && selectedTab === null"
    ) You’re ready to start this container’s first build!
        br
        small.small Or select a tab to continue configuring your container.
    // Ports
    .modal-form(
      ng-include = "'viewFormPorts'"
      ng-show = "selectedTab === 'ports' && state.step === 3"
    )
    // Environment variables
    .modal-form(
      ng-include = "'viewFormEnvironmentVariables'"
      ng-show = "selectedTab === 'env' && state.step === 3"
    )
    // Files & SSH Keys
    .modal-form(
      ng-controller = "ContainerFilesController as CFC"
      ng-include = "'viewFormFiles'"
      ng-show = "selectedTab === 'files' && state.step === 3"
    )
    // Find & Replace
    .modal-form(
      ng-show = "selectedTab === 'translation' && state.step === 3"
      translation-rules
    )
    // Dockerfile
    .modal-form(
      ng-include = "'viewFormBuildfiles'"
      ng-show = "selectedTab === 'buildfiles' && state.step === 3"
    )

footer.modal-footer.clearfix
  //- disabled if there is no value in the command input
  button.btn.green(
    ng-disabled = "verifyServerForm.$invalid || (state.selectedStack | selectedStackInvalid)"
    ng-click = "createServer(state)"
    ng-if="!$root.featureFlags.newVerificationFlow || ($root.featureFlags.newVerificationFlow && state.step >= 3)"
  ) Start Build
  button.btn.green(
    ng-disabled = "verifyServerForm.$invalid || (state.selectedStack | selectedStackInvalid)"
    ng-if="$root.featureFlags.newVerificationFlow && state.step < 3"
    ng-click = "goToNextStep()"
  ) Next
  button.btn.white.btn-cancel(
    ng-click = "defaultActions.cancel()"
    type = "button"
  ) Cancel
