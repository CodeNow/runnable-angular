//- show if server build is being swapped out
  - orange when build is updating or has failed
  - green if build is successfully built
//- Disabling until this section is finished
.alert.in(
  ng-class = "{\
    green: dataInstance.data.showUpdatedMessage,\
    orange: dataInstance.data.showUpdatingMessage\
  }"
  ng-if = "(dataInstance.data.showUpdatingMessage || dataInstance.data.showUpdatedMessage) && dataInstance.data.userIsOrg()"
)
  //- if successful, .green; if fail, .orange
  .btn.btn-xxs.btn-icon.btn-state.no-touching(
    ng-if = ""
    ng-class = "{\
      green: dataInstance.data.showUpdatedMessage,\
      orange: dataInstance.data.showUpdatingMessage\
    }"
  )
    //- if successful
    svg.iconnables.icons-fat-check(
      ng-if = ""
    )
      use(
        xlink:href = "#icons-fat-check"
      )
    //- if failed
    svg.iconnables.icons-warning(
      ng-if = ""
    )
      use(
        xlink:href = "#icons-warning"
      )
  img.gravatar(
    height = "36"
    ng-src = "{{ dataInstance.data.commit.attrs.author.avatar_url }}"
    width = "36"
  )
  //- inherit green/orange from .alert
  button.btn.btn-xs.btn-close(
    ng-class = "{\
      green: dataInstance.data.showUpdatedMessage,\
      orange: dataInstance.data.showUpdatingMessage\
    }"
    ng-click = "dataInstance.data.showUpdatedMessage = false;dataInstance.data.showUpdatingMessage = false"
  )
    svg.iconnables.icons-close
      use(
        xlink:href = "#icons-close"
      )
  //- copy should read:
      if updating: Updating {{ serverName }}
      if success: Successful Build
      if failed: Failed Build
  h4.h4 Updating {{ dataInstance.data.instance.attrs.name }}
  a(
    target = "_blank"
    ng-if = "dataInstance.data.showUpdatedMessage"
  ) {{ dataInstance.data.commit.attrs.author.login }} pushed #{''}
    a.link(
      ng-href = "{{ dataInstance.data.commit.attrs.html_url }}"
      target = "_blank"
    ) {{ dataInstance.data.commit.attrs.sha  | limitTo:6 }}
  //- do not show if integration is already setup
  p.p(
    ng-if = "!dataInstance.data.hasToken"
  ) Get these notifications in Slack?
    button.btn.btn-xxs(
      modal
      modal-actions = "actions.actionsModalIntegrations"
      modal-data = "data.dataModalIntegrations"
      modal-template = "viewOpenModalIntegrations"
      ng-class = "{\
        green: dataInstance.data.showUpdatedMessage,\
        orange: dataInstance.data.showUpdatingMessage\
      }"
    ) Setup

header.server-header

  h1.server-info.load(
    instance = "dataInstance.data.instance"
    instance-box-name
    ng-show = "dataInstance.data.instance"
  )

  instance-primary-actions(
    instance = "dataInstance.data.instance"
    loading = "dataApp.data.loading"
    open-items = "dataInstance.data.openItems"
    saving = "dataInstance.data.saving"
  )

  .secondary-actions(
    instance = "dataInstance.data.instance"
    instances = "dataApp.data.instances"
    instance-secondary-actions
    ng-if = "dataInstance.data.instance"
    ng-if = "!dataInstance.data.isDemo"
    saving = "dataInstance.data.saving"
  )

  instance-anon-secondary-actions(
    ng-if = "dataInstance.data.isDemo"
  )

//- sidebar with repositories and urls
section.sidebar.server-sidebar.load(
  coach-mark-style = "{\"left\": 7, \"top\": 108}"
  coach-mark-template = "viewCoachMarksRepoPopover"
  coach-mark-type = "repoList"
  show-coach-marks
)
  section.row.repo-list(
    auto-build-on-acv-change = "true"
    build = "dataInstance.data.instance.build"
    instance = "dataInstance.data.instance"
    loading = "dataApp.data.loading"
    ng-if = "dataInstance.data.instance.build.contextVersions.models[0].appCodeVersions.models.length"
    repo-list
    show-auto-deploy = "true"
  )

  section.row.linked-server-list.explorer
    .heading
      //- svg.iconnables.icons-edit
      //-   use(
      //-     xlink:href = "#icons-edit"
      //-   )
      p.h22 Linked Servers
    ul.cell
      li
        svg.iconnables.icons-repository
          use(
            xlink:href = "#icons-repository"
          )
        p.pp runnable-web
      .select
        p.pp.light master
        svg.iconnables.icons-arrow-down
          //- use(
          //-   xlink:href = "#icons-arrow-down"
          //- )
        .status-icon.running
    ul.cell
      li
        svg.iconnables.icons-repository
          use(
            xlink:href = "#icons-repository"
          )
        p.pp api
      .select
        p.pp.light error-status
        svg.iconnables.icons-arrow-down
          //- use(
          //-   xlink:href = "#icons-arrow-down"
          //- )
        .status-icon.building
    ul.cell
      li
        svg.iconnables.icons-server
          use(
            xlink:href = "#icons-server"
          )
        p.pp mongoDB
        .status-icon.running
    ul.cell.indirect
      li
        p.pp.light Indirect Links
        .status-icon.running
        .status-icon.running
        .status-icon.building
        li
          svg.iconnables.icons-repository
            use(
              xlink:href = "#icons-repository"
            )
          p.pp api
            span.light /master
          .status-icon.running
        li
          svg.iconnables.icons-repository
            use(
              xlink:href = "#icons-repository"
            )
          p.pp mavis
            span.light /master
          .status-icon.running

  //- section.row.explorer(
  //-   explorer
  //-   edit-explorer = "false"
  //-   file-model = "dataInstance.data.instance.containers.models[0]"
  //-   ng-if = "dataInstance.data.instance.containers.models[0].running()"
  //-   open-items = "dataInstance.data.openItems"
  //-   root-dir = "dataInstance.data.instance.containers.models[0].rootDir"
  //-   explorer-title = "File Explorer"
  //- )

//- in / out control presence of header-bar
section.views(
  active-panel
  background-buttons = "build, server, term, web"
  build = "dataInstance.data.instance.build"
  instance = "dataInstance.data.instance"
  open-items = "dataInstance.data.openItems"
)
