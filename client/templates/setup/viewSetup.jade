header.box-header

  //- name instance input
  setup-box-name(
    name = "dataSetup.data.newInstanceName"
    valid = "dataSetup.data.isValid"
  )

  setup-primary-actions(
    instance-opts = "dataSetup.data.instanceOpts"
    loading = "dataApp.data.loading"
    name = "dataSetup.data.newInstanceName"
    open-items = "dataSetup.data.openItems"
    valid = "dataSetup.data.isValid"
  )

  setup-secondary-actions(
    current-model = "dataSetup.data.instanceOpts"
    state-model = "dataSetup.data.instanceOpts"
  )

section.sidebar.box-sidebar

  repo-list

  docker-templates(
    open-items = "dataSetup.data.openItems"
  )

  docker-validation(
    open-items = "dataSetup.data.openItems"
  )

section.views.with-add-tab(
  ng-class = "{ \
    in: (dataSetup.data.openItems.models.length && \
         dataSetup.data.showExplorer && \
         !dataSetup.data.loading) \
  }"
)
  //- explorer
  button.btn-sm.white.btn-icon.explorer-toggle(
    ng-click = "dataSetup.data.showExplorer = !dataSetup.data.showExplorer"
    ng-if = "dataSetup.data.openItems.models.length"
    type = "button"
  )
    svg.iconnables.icons-folder-open
      use(
        xlink:href = "#icons-folder-open"
      )

  explorer(
    open-items = "dataSetup.data.openItems"
    toggle-theme = "dataSetup.data.toggleTheme"
  )

  //- tabs
  tabs(
    open-items = "dataSetup.data.openItems"
  )

  //- active panel
  active-panel(
    is-dark-theme = "dataSetup.data.toggleTheme",
    open-items = "dataSetup.data.openItems",
    state-model = "dataSetup.data.instanceOpts"
  )

  //- dataSetup.data.showVideo
  //- dataSetup.data.hideVideo
  //- dataSetup.data.showVideoFixed
  //- dataSetup.data.closeVideoAlert
  .embed-wrapper(
    ng-class = "{ \
      fixed: dataSetup.data.showVideoFixed \
    }"
    ng-if = "!dataSetup.data.hideVideo"
  )
    .embed-guide(
      ng-class = "{out: dataSetup.data.showVideo}"
    )
      h2.embed-heading Need help?
      p Watch this video to get started.
      button.btn.btn-embed-play(
        ng-click = "dataSetup.data.showVideo = true; \
                    dataSetup.actions.olarkShrink();"
      )
        svg.iconnables.icons-run
          use(
            xlink:href = "#icons-run"
          )
    iframe.embed-iframe(
      allowfullscreen
      frameborder="0"
      height = "100%"
      ng-if = "dataSetup.data.showVideo"
      src = "//www.youtube.com/embed/oiSn4-A8Qpw?rel=0&amp;showinfo=0&amp;autoplay=1"
      width = "100%"
    )
    button.btn.btn-icon.btn-embed-close(
      ng-click = "dataSetup.data.hideVideo = true; \
        dataSetup.data.closeVideoAlert = false; \
        dataSetup.data.showVideoFixed = false;"
    )
      svg.iconnables.icons-close
        use(
          xlink:href = "#icons-close"
        )

  //- show after selecting a template
  .alert.guide(
    ng-click = " \
      dataSetup.actions.olarkShrink(); \
      dataSetup.data.showVideoFixed = true; \
      dataSetup.data.showVideo = true; \
      dataSetup.data.hideVideo = false"
    ng-hide = "dataSetup.data.closeVideoAlert || dataSetup.data.showVideoFixed"
    ng-if = "dataSetup.data.build.contextVersions.models[0].source"
  ) Lost? Here's a video.
    //- shrink olark on click
    //- https://www.olark.com/documentation/javascript/api.box.shrink
    button.btn.btn-xs.btn-close(
      ng-click = " \
        dataSetup.data.closeVideoAlert = true; \
        $event.stopPropagation();"
    )
      svg.iconnables.icons-close
        use(
          xlink:href = "#icons-close"
        )

  .spinner-container.spinner-backdrop.spinner-md(
    ng-class = "{in: dataSetup.data.fetchingContext}"
    ng-include = "'spinner'"
  )
