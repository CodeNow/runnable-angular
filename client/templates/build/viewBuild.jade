nav.sub-header
  h1.build-header.divided-header.animations-off(
    ng-class = "{'in': !dataBuild.data.isClean }"
  )
    button.btn-icon.silver.tooltip(
      data-title = "View All Builds"
      ng-click = "dataBuild.actions.stateToBuildList($event)"
      type = "button"
    )
      svg.iconnables.icons-back-table
        use(xlink:href = "#icons-back-table")
    .iconnables.iconnables-container
      svg.iconnables.icons-check
        use(xlink:href = "#icons-check")
      svg.iconnables.icons-asterisk
        use(xlink:href = "#icons-asterisk")
    | Build {{ dataBuild.data.build.attrs.id | limitTo:4 }}...

  section#main-controls(ng-class = "{'in': !dataBuild.data.isClean}")
    .clean(ng-class = "{in: dataBuild.data.showBuildOptionsClean}")
      button.orange(
        type = "button"
        ng-click = "dataBuild.actions.runInstance()"
      ) Run Instance
      .btn-group
        button.silver(
          type = "button"
          ng-click = "dataBuild.actions.rebuild();"
        ) Rebuild
        button.silver.btn-icon(
          ng-class = "{active: dataBuild.data.showBuildOptionsClean}"
          ng-click = "dataBuild.actions.togglePopover('BuildOptionsClean', $event)"
          type = "button"
        )
          svg.iconnables.icons-arrow-down
            use(xlink:href = "#icons-arrow-down")
          .popover.menu.bottom.fade(
            ng-class = "{in: dataBuild.data.showBuildOptionsClean}"
            ng-include = "'viewBuildPopoverBuildOptions'"
          )

    .dirty(ng-class = "{in: dataBuild.data.showBuildOptionsDirty}")
      .btn-group
        button.green(
          type = "button"
          ng-click = "dataBuild.actions.build()"
        ) Build
        button.green.btn-icon(
          ng-class = "{active: dataBuild.data.showBuildOptionsDirty}"
          ng-click = "dataBuild.actions.togglePopover('BuildOptionsDirty', $event)"
          type = "button"
        )
          svg.iconnables.icons-arrow-down
            use(xlink:href = "#icons-arrow-down")
          .popover.menu.bottom.fade(
            ng-class = "{in: dataBuild.data.showBuildOptionsDirty}"
            ng-include = "'viewBuildPopoverBuildOptions'"
          )
      button.silver(
        type = "button"
        ng-click = "dataBuild.actions.discardChanges()"
      ) Discard Changes

section.sidebar
  ul(
    ng-show = "dataBuild.data.build.attrs.created"
  )
    li
      svg.iconnables.icons-recipe
        use(xlink:href = "#icons-recipe")
      b {{ dataApp.stateParams.branchName }}
      | #{''} config
    li
      svg.iconnables.icons-duration
        use(xlink:href = "#icons-duration")
      | Built in 87 seconds
    li
      svg.iconnables.icons-calendar
        use(xlink:href = "#icons-calendar")
      | Initiated {{ dataBuild.data.build.attrs.created | timeAgo }}
    li
      svg.iconnables.icons-trigger
        use(xlink:href = "#icons-trigger")
      | Triggered by <a>{{ dataBuild.data.buildOwner.attrs.username }}</a>
  h3 Message Log
  ol#messages
    li(ng-repeat = "commit in dataBuild.data.commits")
      ol.message
        li
          a {{commit.message}}
        li
          a
            img
            | #{''} {{commit.username}}
          span {{commit.hash}}
    li
      ol.message
        li
          a removing comment
        li
          a
            img(
              height = "20"
              src = "https://avatars0.githubusercontent.com/u/467885?s=64"
              width = "20"
            )
            |&nbsp;cflynn07
          a 37a8f1
            svg.iconnables.icons-git
              use(xlink:href = "#icons-git")
    li
      ol.message
        li
          a separate popover for branches
        li
          a
            img(
              height = "20"
              src = "http://www.gravatar.com/avatar/49fa96bd569083f739e8f8e37264b6fc?s=64"
              width = "20"
            )
            |&nbsp;prafulrana
          a 37a8f1
            svg.iconnables.icons-git
              use(xlink:href = "#icons-git")
    li
      ol.message
        li
          a change project popover
        li
          a
            img(
              height = "20"
              src = "http://www.gravatar.com/avatar/452e4a4c93d2ffba9999b03cea258206?s=64"
              width = "20"
            )
            |&nbsp;runnabro
          a 37a8f1
            svg.iconnables.icons-git
              use(xlink:href = "#icons-git")
    li
      ol.message
        li
          a remove sign up, new, search from header
        li
          a
            img(
              height = "20"
              src = "http://www.gravatar.com/avatar/452e4a4c93d2ffba9999b03cea258206?s=64"
              width = "20"
            )
            |&nbsp;runnabro
          a 37a8f1
            svg.iconnables.icons-git
              use(xlink:href = "#icons-git")
    li
      ol.message
        li
          a sync with tony
        li
          a
            img(
              height = "20"
              src = "https://avatars0.githubusercontent.com/u/467885?s=64"
              width = "20"
            )
            |&nbsp;cflynn07
          a 37a8f1
            svg.iconnables.icons-git
              use(xlink:href = "#icons-git")


//- code_editor
#editor.in(
  ng-class="{'in': dataBuild.data.showExplorer, '': !dataBuild.data.showExplorer}"
)
  aside#explorer
    #controls
      button.toggle-theme.tooltip(
        data-title = "Change Theme"
        ng-class = "{dark: !dataBuild.data.toggleTheme, light: dataBuild.data.toggleTheme}"
        ng-click = "dataBuild.data.toggleTheme = !dataBuild.data.toggleTheme"
      )
        .theme
    file-tree(
      version = "dataBuild.data.version"
      open-files = "dataBuild.data.openFiles"
    )
    #repo-list.explorer-header
      h6
        | REPOSITORIES
        button.silver.btn-sm.file-explorer-menu.btn-icon(
          ng-class = "{active: dataInstance.showFileMenu}"
          ng-click = "dataInstance.actions.togglePopover('FileMenu', $event)"
        )
          svg.iconnables.icons-gear
            use(xlink:href = "#icons-gear")
          .popover.menu.bottom.fade(
            ng-class = "{in: dataInstance.data.PopoverRepoMenu}"
            ng-include = "'viewInstancePopoverFileMenu'"
          )
      ul.repo-tree
        li
          object.iconnables.filetypes(
            data = "/build/images/icons/filetypes/icons-git.svg"
            type = "image/svg+xml"
          )
          | org/reponame
          small 02cfe5664f
        li
          object.iconnables.filetypes(
            data = "/build/images/icons/filetypes/icons-git.svg"
            type = "image/svg+xml"
          )
          | org/reponame
          small 02cfe5664f
        li
          object.iconnables.filetypes(
            data = "/build/images/icons/filetypes/icons-git.svg"
            type = "image/svg+xml"
          )
          | org/reponame
          small 02cfe5664f

  button#explorer-toggle.btn-icon(
    ng-click = "dataBuild.actions.toggleExplorer($event)"
    type = "button"
  )
    svg.iconnables.icons-folder-open
      use(xlink:href = "#icons-folder-open")

  tabs(
    open-files = "dataBuild.data.openFiles"
  )
  tabs-dropdown(
    open-files = "dataBuild.data.openFiles"
  )
  #editor-container
    //- code
    pre(
      ui-ace
      ng-model = "dataBuild.data.openFiles.activeFile.attrs.Key"
      ng-keyup = "dataBuild.data.isClean = false"
    )
