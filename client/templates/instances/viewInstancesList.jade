.spinner-wrapper.spinner-md.spinner-gray.spinner-center.in(
  ng-if = "!CIS.instancesByPod"
  ng-include = "'spinner'"
)

//- repository based containers
.list(
  ng-if = "CIS.instancesByPod"
  ng-repeat = "masterInstance in CIS.instancesByPod.models | instanceHasRepo:true | orderBy: ['attrs.name'] track by masterInstance.attrs.name"
)
  //- repository name
  .list-item.list-item-header
    span.text-overflow(
      title = "{{masterInstance.getRepoName()}}"
    ) {{masterInstance.getRepoName()}}
    //- configure button for repo containers
    svg.iconnables.icons-advanced(
      ng-click="CIS.editInstance(masterInstance)"
      title = "Configure"
    )
      use(
        xlink:href = "#icons-advanced"
      )

  //- if isolated add .isolated
  //- if sub item is active add open class.
  div(
    active-account = "CIS.activeAccount"
    instance = "masterInstance"
    instance-navigation
    master-instance = "masterInstance"
  )

  div(
    active-account = "CIS.activeAccount"
    instance = "childInstance"
    instance-navigation
    master-instance = "masterInstance"
    ng-class = "{'active': branch.selected}"
    ng-repeat = "childInstance in masterInstance.children.models | orderBy: ['attrs.name']"
  )

    //- list of isolated containers
    ul.list.list-isolated(
      ng-if = "$root.featureFlags.isolationUI && branch.isolation && branch.selected"
    )
      li.list-item(
        ng-repeat = "container in isolatedContainers"
      )
        .list-item-container
          .icons-status(
            ng-class = "{'{{container.name}}': true}"
          )
          .text-overflow {{container.name}}
          svg.iconnables.icons-overflow.icons-overflow-isolated
            use(
              xlink:href = "#icons-overflow"
            )

  //- if default container is not running or if no admin is present
  //- popover should appear on hover
  button.btn.btn-xs.white.btn-add-branches.disabled(
    pop-over
    pop-over-options = "{\"verticallyCentered\": true, \"left\": 129}"
    pop-over-template = "enableBranchesPopoverView"
    ng-if = "$root.featureFlags.webhooks && !$root.featureFlags.webhooksContainerRunning || !$root.featureFlags.webhooksAdminPresent"
  ) Enable Branches…
    //- pop-over-options = "{\"top\":33}"

  //- if default container is running and admin is present
  button.btn.btn-xs.white.btn-add-branches(
    modal
    modal-template = "enableBranchesModalView"
    ng-if = "$root.featureFlags.webhooks && $root.featureFlags.webhooksContainerRunning && $root.featureFlags.webhooksAdminPresent"
  ) Enable Branches…

  //- nav list filter
  .btn.btn-xxs.btn-more-containers(
    ng-if = "$root.featureFlags.navListFilter"
    pop-over
    pop-over-options = "{\"top\":-33,\"left\":215}"
    pop-over-template = "viewMoreContainersPopover"
  ) 8 more…

//- non-repository based containers
.list(
  ng-show = "nonRepoInstances.length"
)
  div(
    instance-navigation
    instance = "masterInstance"
    active-account = "CIS.activeAccount"
    ng-repeat = "masterInstance in CIS.instancesByPod.models | instanceHasRepo:false | orderBy: ['attrs.name'] as nonRepoInstances track by masterInstance.attrs.name"
  )
